{% extends 'base.html' %}
{% load static %}
{% load account %}
{% load socialaccount %}
{% load staticfiles %}
{% block title %} my {% endblock %}


{% block extracss %}
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.10.18/datatables.min.css"/>
{% endblock extracss %}

{% block extrajs %}
<script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.10.18/datatables.min.js"></script>
{% endblock extrajs %}


{% block content %}
<style>
#my-data {
    white-space: nowrap;
    table-layout: fixed;
    overflow: hidden;
}

#my-data tbody td{
    overflow: hidden;
}

#col-names-in {
    width: 400px;
}

#col-names-out {
    width: 400px;
}

.container {
    margin: 0 auto;
    width: 100%;
}
</style>

<br>
<div class="row">
    <div class="col s12 right-align">
        <a href="{% url 'send' %}" class="btn btn-outline-primary">Send new job</a>
    </div>
</div>

<table class="highlight" id="my-data">
    <thead>
    <tr>
        <th>Id</th>
        <th>Name</th>
        <th>Received DateTime</th>
        <th>Description</th>
        <th >Status</th>
        <th id="col-names-in">Names of columns input</th>
        <th id="col-names-out">Names of columns output</th>
        <th>Acuracy</th>
    </tr>
    </thead>

    <tbody>
    </tbody>
</table>

<script type="text/javascript">
$(document).ready(function() {
    $("#my-data").on('click', function(e) {
        if (e.target.tagName == 'TD') {
            var tr = e.target.parentNode;
            var td = tr.firstChild;
            var batch_id = td.innerHTML;
            window.location.href = '/send2/' + batch_id;
        }
    });
});
</script>

<script type="text/javascript" language="javascript" class="init">
// table
$(document).ready(function() {
    var USERS_LIST_JSON_URL = '{% url "my_ajax" %}';
    // translations for datatables
    var oLanguages = {
        oPaginate:{
            sFirst:'<<',
            sLast: '>>',
            sNext: '>',
            sPrevious: '<'
        },
        sInfo:          "Showing _START_ to _END_ of _TOTAL_ entries",
        sInfoEmpty:     "No entries to show",
        sInfoFiltered:  "(filtered from _MAX_ total entries)",
        sLengthMenu:    "Show _MENU_ entries",
        sProcessing:    "Processing",
        sSearch:        "Filter records:",
        sZeroRecords:   "No data to show"
    };

    var dt_table = $('#my-data').dataTable({
        "pageLength": 5,
        "lengthChange": false,
        "searching": false,
        "oLanguage": oLanguages,
        "info" : false,
        "bInfo" : false,
        "ordering": false,
        "bFilter": true,
        "aLengthMenu": [[25, 50, 100, 200], [25, 50, 100, 200]],
        "iDisplayLength" : 5,
        "aaSorting": [[ 0, "desc" ]],
        "bAutoWidth": true,
        "bProcessing": true,
        "bServerSide": true,
        "bStateSave": true,
        "sAjaxSource": USERS_LIST_JSON_URL
    });
});
</script>
{% endblock content %}
