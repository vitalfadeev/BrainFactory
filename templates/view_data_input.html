{% load static %}

{% block extracss %}
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.10.18/datatables.min.css"/>
{% endblock extracss %}

{% block extrajs %}
<script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.10.18/datatables.min.js"></script>
{% endblock extrajs %}


{% block content %}

<style>
#data-input-table {
    white-space: nowrap;
    /* table-layout: fixed; */
}

#data-input-table tbody td{
}
</style>

<div class="">
    <div class="">
            {% if error_dataset %}
            <div id="dataset-error" class="card-panel red lighten-5">
                <dic>
                    {{ error_dataset }}
                </dic>
            </div>
            {% endif %}

            <table class="" id="data-input-table" style="width:100%;">
                <thead>
                <tr id="row-titles">
                    {% for t in titles %}
                    <th>{{ t }}</th>
                    {% endfor %}
                </tr>

                {% if has_errors %}
                <tr id="row-errors">
                    {% for e in errors %}
                        {% if e %}
                            <td class="red lighten-3">{{ e }}</td>
                        {% else %}
                            <td class="">{{ e }}</td>
                        {% endif %}
                    {% endfor %}
                </tr>
                {% endif %}

                {% if has_warnings %}
                <tr id="row-warnings">
                    {% for e in warnings %}
                        {% if e %}
                        <td class="yellow lighten-3">{{ e }}</td>
                        {% else %}
                        <td class="">{{ e }}</td>
                        {% endif %}
                    {% endfor %}
                </tr>
                {% endif %}

                <tr id="row-types">
                    {% for f in types %}
                    <td>{{ f }}</td>
                    {% endfor %}
                </tr>

                </thead>

                <tbody>
                </tbody>
            </table>

            <div class="">
                <a href="{% url "view_export_input_csv" batch.Batch_Id %}" class="">Download File data in CSV</a>
                or
                <a href="{% url "view_export_input_xls" batch.Batch_Id %}" class="">XLS</a>
            </div>
    </div>
</div>

<script type="text/javascript" language="javascript" class="init">
// table
$(document).ready(function() {
    var USERS_LIST_JSON_URL = '{% url "send2/id/ajax"  batch.Batch_Id %}';
    // translations for datatables
    var oLanguages = {
        oPaginate:{
            sFirst:'<<',
            sLast: '>>',
            sNext: '>',
            sPrevious: '<'
        },
        sInfo:          "Showing _START_ to _END_ of _TOTAL_ entries",
        sInfoEmpty:     "No entries to show",
        sInfoFiltered:  "(filtered from _MAX_ total entries)",
        sLengthMenu:    "Show _MENU_ entries",
        sProcessing:    "Processing",
        sSearch:        "Filter records:",
        sZeroRecords:   "No data to show"
    };

    var dt_table = $('#data-input-table').dataTable({
        "pageLength": 5,
        "lengthChange": false,
        "searching": false,
        "oLanguage": oLanguages,
        "info" : false,
        "bInfo" : false,
        "ordering": false,
        "bFilter": true,
        "aLengthMenu": [[25, 50, 100, 200], [25, 50, 100, 200]],
        "iDisplayLength" : 5,
        //"aaSorting": [[ 0, "desc" ]],
        "bAutoWidth": true,
        "bProcessing": true,
        "bServerSide": true,
        "bStateSave": true,
        "sAjaxSource": USERS_LIST_JSON_URL
    });
});
</script>

{% endblock %}
